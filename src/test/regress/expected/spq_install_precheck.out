create database test_b dbcompatibility 'B';
NOTICE:  Spq partially supports CREATE DATABASE for distributed databases
DETAIL:  Spq does not propagate CREATE DATABASE command to workers
HINT:  You can manually create a database and its extensions on workers.
\c test_b
SELECT datcompatibility FROM pg_database WHERE datname = current_database();
 datcompatibility
---------------------------------------------------------------------
 B
(1 row)

-- expect error
create extension spq;
ERROR:  SPQ can only be installed in a database with A compatibility mode
\c regression
drop database test_b;
create database test_c dbcompatibility 'C';
NOTICE:  Spq partially supports CREATE DATABASE for distributed databases
DETAIL:  Spq does not propagate CREATE DATABASE command to workers
HINT:  You can manually create a database and its extensions on workers.
\c test_c
SELECT datcompatibility FROM pg_database WHERE datname = current_database();
 datcompatibility
---------------------------------------------------------------------
 C
(1 row)

-- expect error
create extension spq;
ERROR:  SPQ can only be installed in a database with A compatibility mode
\c regression
drop database test_c;
create database test_d dbcompatibility 'D';
NOTICE:  Spq partially supports CREATE DATABASE for distributed databases
DETAIL:  Spq does not propagate CREATE DATABASE command to workers
HINT:  You can manually create a database and its extensions on workers.
\c test_d
SELECT datcompatibility FROM pg_database WHERE datname = current_database();
 datcompatibility
---------------------------------------------------------------------
 D
(1 row)

-- expect error
create extension spq;
ERROR:  SPQ can only be installed in a database with A compatibility mode
\c regression
drop database test_d;
create database test_pg dbcompatibility 'PG';
NOTICE:  Spq partially supports CREATE DATABASE for distributed databases
DETAIL:  Spq does not propagate CREATE DATABASE command to workers
HINT:  You can manually create a database and its extensions on workers.
\c test_pg
SELECT datcompatibility FROM pg_database WHERE datname = current_database();
 datcompatibility
---------------------------------------------------------------------
 PG
(1 row)

-- expect error
create extension spq;
ERROR:  SPQ can only be installed in a database with A compatibility mode
\c regression
drop database test_pg;
